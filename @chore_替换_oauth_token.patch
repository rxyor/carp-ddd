Index: carp-auth/carp-auth-start/src/main/java/com/github/rxyor/carp/auth/start/config/AuthorizationServerConfig.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- carp-auth/carp-auth-start/src/main/java/com/github/rxyor/carp/auth/start/config/AuthorizationServerConfig.java	(revision e2abc75b8d76469f6168af6b75813096477250ca)
+++ carp-auth/carp-auth-start/src/main/java/com/github/rxyor/carp/auth/start/config/AuthorizationServerConfig.java	(date 1577958097007)
@@ -89,6 +89,7 @@
     @Override
     public void configure(AuthorizationServerEndpointsConfigurer endpoints) throws Exception {
         endpoints
+            .pathMapping("/oauth/token","/oauth2/token/access")
             .authenticationManager(authenticationManager)
             .tokenServices(authorizationServerTokenServices())
             .userDetailsService(userDetailsService)
Index: carp-auth/carp-auth-start/src/main/resources/application.yml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- carp-auth/carp-auth-start/src/main/resources/application.yml	(revision e2abc75b8d76469f6168af6b75813096477250ca)
+++ carp-auth/carp-auth-start/src/main/resources/application.yml	(date 1577779035949)
@@ -10,6 +10,8 @@
       connect-string: test.dev:2181
       discovery:
         enabled: true
+  main:
+    allow-bean-definition-overriding: true
 
 logging:
   config: classpath:config/properties/log4j2.properties
Index: carp-auth/carp-auth-start/src/main/java/com/github/rxyor/carp/auth/start/endpoint/CarpTokenPoint.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- carp-auth/carp-auth-start/src/main/java/com/github/rxyor/carp/auth/start/endpoint/CarpTokenPoint.java	(revision e2abc75b8d76469f6168af6b75813096477250ca)
+++ carp-auth/carp-auth-start/src/main/java/com/github/rxyor/carp/auth/start/endpoint/CarpTokenPoint.java	(date 1577960259552)
@@ -3,14 +3,21 @@
 import com.github.rxyor.common.core.model.R;
 import io.swagger.annotations.Api;
 import io.swagger.annotations.ApiOperation;
-import lombok.AllArgsConstructor;
+import java.security.Principal;
+import java.util.Map;
 import org.apache.commons.lang3.StringUtils;
+import org.springframework.beans.factory.annotation.Autowired;
 import org.springframework.http.HttpHeaders;
+import org.springframework.http.ResponseEntity;
 import org.springframework.security.oauth2.common.OAuth2AccessToken;
+import org.springframework.security.oauth2.provider.endpoint.TokenEndpoint;
 import org.springframework.security.oauth2.provider.token.TokenStore;
+import org.springframework.web.HttpRequestMethodNotSupportedException;
 import org.springframework.web.bind.annotation.PostMapping;
 import org.springframework.web.bind.annotation.RequestHeader;
 import org.springframework.web.bind.annotation.RequestMapping;
+import org.springframework.web.bind.annotation.RequestMethod;
+import org.springframework.web.bind.annotation.RequestParam;
 import org.springframework.web.bind.annotation.RestController;
 
 /**
@@ -24,11 +31,14 @@
  */
 @Api(tags = "token操作")
 @RestController
-@AllArgsConstructor
-@RequestMapping("/oauth")
+@RequestMapping("/oauth2")
 public class CarpTokenPoint {
 
-    private final TokenStore tokenStore;
+    @Autowired
+    private TokenStore tokenStore;
+
+    @Autowired
+    private TokenEndpoint tokenEndpoint;
 
     @ApiOperation(value = "移除当前登录用户Token", httpMethod = "POST")
     @PostMapping("/token/remove")
@@ -45,4 +55,17 @@
         return R.success(Boolean.TRUE);
     }
 
+    @RequestMapping(value = "/token/access", method = RequestMethod.GET)
+    public R<OAuth2AccessToken> getAccessToken(Principal principal, @RequestParam
+        Map<String, String> parameters) throws HttpRequestMethodNotSupportedException {
+        ResponseEntity<OAuth2AccessToken> ret = tokenEndpoint.getAccessToken(principal, parameters);
+        return R.success(ret.getBody());
+    }
+
+    @RequestMapping(value = "/token/access", method = RequestMethod.POST)
+    public R<OAuth2AccessToken> postAccessToken(Principal principal, @RequestParam
+        Map<String, String> parameters) throws HttpRequestMethodNotSupportedException {
+        ResponseEntity<OAuth2AccessToken> ret = tokenEndpoint.postAccessToken(principal, parameters);
+        return R.success(ret.getBody());
+    }
 }
Index: carp-auth/carp-auth-security/src/main/java/com/github/rxyor/carp/auth/security/config/BeanConfig.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- carp-auth/carp-auth-security/src/main/java/com/github/rxyor/carp/auth/security/config/BeanConfig.java	(revision e2abc75b8d76469f6168af6b75813096477250ca)
+++ carp-auth/carp-auth-security/src/main/java/com/github/rxyor/carp/auth/security/config/BeanConfig.java	(date 1577779567339)
@@ -1,6 +1,8 @@
 package com.github.rxyor.carp.auth.security.config;
 
 import com.fasterxml.jackson.databind.ObjectMapper;
+import com.github.rxyor.carp.auth.security.exhandler.CarpAccessDeniedHandler;
+import com.github.rxyor.carp.auth.security.exhandler.CarpWebResponseExceptionTranslator;
 import com.github.rxyor.carp.auth.security.support.oauth2.CarpClientDetailsService;
 import com.github.rxyor.carp.auth.security.support.oauth2.CarpUserDetailsService;
 import com.github.rxyor.carp.auth.security.support.oauth2.ResourceAuthExceptionEntryPoint;
@@ -62,4 +64,14 @@
         return new RedisKeyBuilder(appName, "::");
     }
 
+    @Bean
+    public CarpWebResponseExceptionTranslator webResponseExceptionTranslator(){
+        return new CarpWebResponseExceptionTranslator();
+    }
+
+    @Bean
+    public CarpAccessDeniedHandler accessDeniedHandler(ObjectMapper objectMapper){
+        return new CarpAccessDeniedHandler(objectMapper);
+    }
+
 }
Index: carp-auth/carp-auth-security/src/main/java/com/github/rxyor/carp/auth/security/exhandler/CarpAccessDeniedHandler.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- carp-auth/carp-auth-security/src/main/java/com/github/rxyor/carp/auth/security/exhandler/CarpAccessDeniedHandler.java	(revision e2abc75b8d76469f6168af6b75813096477250ca)
+++ carp-auth/carp-auth-security/src/main/java/com/github/rxyor/carp/auth/security/exhandler/CarpAccessDeniedHandler.java	(date 1577772912381)
@@ -14,7 +14,6 @@
 import org.springframework.http.HttpStatus;
 import org.springframework.http.MediaType;
 import org.springframework.security.oauth2.provider.error.OAuth2AccessDeniedHandler;
-import org.springframework.stereotype.Component;
 
 /**
  *<p>
@@ -26,7 +25,6 @@
  * @since 1.0.0
  */
 @Slf4j
-@Component
 @AllArgsConstructor
 public class CarpAccessDeniedHandler extends OAuth2AccessDeniedHandler {
 
Index: carp-auth/carp-auth-start/src/main/java/com/github/rxyor/carp/auth/start/config/WebSecurityConfig.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- carp-auth/carp-auth-start/src/main/java/com/github/rxyor/carp/auth/start/config/WebSecurityConfig.java	(revision e2abc75b8d76469f6168af6b75813096477250ca)
+++ carp-auth/carp-auth-start/src/main/java/com/github/rxyor/carp/auth/start/config/WebSecurityConfig.java	(date 1577957277493)
@@ -40,7 +40,8 @@
         http.csrf().disable();
         http.httpBasic();
         http.authorizeRequests()
-            .antMatchers("/oauth/token").permitAll();
+            .antMatchers("/oauth/token").permitAll()
+            .antMatchers("/oauth2/token/access").permitAll();
     }
 
     @Override
